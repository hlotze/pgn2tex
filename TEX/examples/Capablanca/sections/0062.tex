\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Capablanca, Jose Raul $\square$}
\index{Players ! Janowsky, Dawid Markelowicz $\blacksquare$}
\subsection{Capablanca, Jose Raul vs. Janowsky, Dawid Markelowicz -- 1-0 -- D40}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! D00 -- Queen's Pawn: 2.e3 Nf6}
\subsubsection{D00 -- Queen's Pawn: 2.e3 Nf6}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. d4 d5 2. e3 Nf6}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={rnbqkb1r/ppp1pppp/5n2/3p4/3P4/4P3/PPP2PPP/RNBQKBNR w KQkq - 1 3},
             pgfstyle=border,
             color=YellowGreen,
             markfields={g8,f6},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={g8-f6}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{San Sebastian, San Sebastian}}\\ 
\multicolumn{2}{l}{1911 Round 5}\\[3mm]
\textbf{$\square$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Janowsky, Dawid Markelowicz} & \textbf{0}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. d4 d5 2. e3 Nf6}\mainline{3. Nf3 c5 4. c4 e6 5. Nc3 Be7 6. dxc5 O-O 7. a3 Bxc5 8. b4 Be7 9. Bb2 a5 10. b5 b6 11. cxd5 exd5 12. Nd4 Bd6 13. Be2 Be6 14. Bf3 Ra7 15. O-O Rc7 16. Qb3 Nbd7 17. Rfd1 Ne5 18. Be2 Qe7 19. Rac1 Rfc8 20. Na4 Rxc1 21. Rxc1 Rxc1+ 22. Bxc1 Ne4 23. Bb2 Nc4 24. Bxc4 Bxh2+ 25. Kxh2 Qh4+ 26. Kg1 Qxf2+ 27. Kh2 Qg3+ 28. Kg1 dxc4 29. Qc2 Qxe3+ 30. Kh2 Qh6+ 31. Kg1 Qe3+ 32. Kh2 Qg3+ 33. Kg1 Qe1+ 34. Kh2 Nf6 35. Nxe6 Qh4+ 36. Kg1 Qe1+ 37. Kh2 Qh4+ 38. Kg1 Ng4 39. Qd2 Qh2+ 40. Kf1 Qh1+ 41. Ke2 Qxg2+ 42. Kd1 Nf2+ 43. Kc2 Qg6+ 44. Kc1 Qg1+ 45. Kc2 Qg6+ 46. Kc1 Nd3+ 47. Kb1 fxe6 48. Qc2 h5 49. Bd4 h4 50. Bxb6 h3 51. Bc7 e5 52. b6 Qe4 53. Bxe5 Qe1+ 54. Ka2 Nxe5 55. b7 Nd7 56. Nc5 Nb8 57. Qxc4+ Kh8 58. Ne4 Kh7 59. Qd3 g6 60. Qxh3+ Kg7 61. Qf3 Qc1 62. Qf6+ Kh7 63. Qf7+ Kh6 64. Qf8+ Kh5 65. Qh8+ Kg4 66. Qc8+ }

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={h8,c8},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={h8-c8},
       pgfstyle=circle,
       color=BrickRed,
       markfield={g4}]
\newline
66.\,\xskakget{lan} ...
\newline
1-0
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
