\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Capablanca, Jose Raul $\square$}
\index{Players ! Gilg, Karl $\blacksquare$}
\subsection{Capablanca, Jose Raul vs. Gilg, Karl -- 1-0 -- D30}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! D30 -- QGD: 3.Nf3 Nf6 4.Bg5 Be7 5.e3}
\subsubsection{D30 -- QGD: 3.Nf3 Nf6 4.Bg5 Be7 5.e3}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. d4 d5 2. c4 e6 3. Nf3 Nf6 4. Bg5 Be7 5. e3}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={rnbqk2r/ppp1bppp/4pn2/3p2B1/2PP4/4PN2/PP3PPP/RN1QKB1R b KQkq - 0 5},
             pgfstyle=border,
             color=YellowGreen,
             markfields={e2,e3},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={e2-e3}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{Karlsbad, Karlsbad}}\\ 
\multicolumn{2}{l}{1929}\\[3mm]
\textbf{$\square$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Gilg, Karl} & \textbf{0}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. d4 d5 2. c4 e6 3. Nf3 Nf6 4. Bg5 Be7 5. e3}\mainline{5...  Nbd7 6. Nbd2 h6 7. Bh4 O-O 8. Rc1 c5 9. cxd5 Nxd5 10. Bg3 b6 11. Bd3 cxd4 12. exd4 Bb7 13. O-O N7f6 14. Re1 Rc8 15. Rxc8 Qxc8 16. Ne5 Qd8 17. a3 a6 18. Nb3 Bd6 19. Qe2 a5 20. Nd2 Qe7 21. Bb1 Rc8 22. Qd3 Bb8 23. f4 Qf8 24. Nd7 Qe8 25. Nxb8 Rxb8 26. f5 Rd8 27. Nf3 Bc8 28. fxe6 Bxe6 29. Ne5 Qf8 30. Ng6 Qe8 31. Nf4 Nxf4 32. Bxf4 Qd7 33. Be5 Kf8 34. h3 Ne8 35. Qh7 f6 36. Qh8+ Ke7 37. Bg3 Qd5 38. Bg6 }

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={b1,g6},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={b1-g6}]
\newline
38.\,\xskakget{lan} ...
\newline
1-0
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
