\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Marshall, Frank James $\square$}
\index{Players ! Capablanca, Jose Raul $\blacksquare$}
\subsection{Marshall, Frank James vs. Capablanca, Jose Raul -- 0-1 -- B18}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! B18 -- Caro-Kann: Classical, Maroczy Attack}
\subsubsection{B18 -- Caro-Kann: Classical, Maroczy Attack}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. e4 c6 2. d4 d5 3. Nc3 dxe4 4. Nxe4 Bf5 5. Ng3 Bg6 6. f4}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={rn1qkbnr/pp2pppp/2p3b1/8/3P1P2/6N1/PPP3PP/R1BQKBNR b KQkq - 0 6},
             pgfstyle=border,
             color=YellowGreen,
             markfields={f2,f4},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={f2-f4}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{New York, New York}}\\ 
\multicolumn{2}{l}{1927 Round 4}\\[3mm]
\textbf{$\square$ \hspace{2mm} Marshall, Frank James} & \textbf{0}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. e4 c6 2. d4 d5 3. Nc3 dxe4 4. Nxe4 Bf5 5. Ng3 Bg6 6. f4}\mainline{6...  e6 7. Nf3 Bd6 8. Bd3 Ne7 9. O-O Nd7 10. Kh1 Qc7 11. Ne5 Rd8 12. Qe2 Bxd3 13. Nxd3 O-O 14. Bd2 c5 15. Ne4 Nf5 16. dxc5 Nxc5 17. Ndxc5 Bxc5 18. Bc3 Bd4 19. Rad1 Bxc3 20. Nxc3 Rxd1 21. Nxd1 Rd8 22. Nc3 Qb6 23. Rd1 Rxd1+ 24. Nxd1 Qb4 25. Qf2 h5 26. a3 Qd6 27. Nc3 Qd4 28. Qxd4 Nxd4 29. Ne4 Nxc2 30. Nd6 Ne3 31. a4 Nd5 32. Nxb7 Nxf4 33. b4 Nd5 34. b5 Nc3 35. Na5 Nxa4 36. Nc6 Kf8 37. Nxa7 Ke7 38. Nc6+ Kd6 39. Kg1 f6 40. Kf2 e5 41. Nd8 Kd7 42. Nb7 Kc7 43. Na5 Nc3 44. Kf3 Nxb5 45. Ke4 Nd6+ 46. Kd5 Kd7 47. Nc6 Nc8 48. Nb8+ Ke7 49. Nc6+ Kf7 50. Nd8+ Ke8}

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={f7,e8},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={f7-e8}]
\newline
50. ...\,\xskakget{lan}
\newline
0-1
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
