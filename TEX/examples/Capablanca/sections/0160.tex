\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Bernstein, Jacob $\square$}
\index{Players ! Capablanca, Jose Raul $\blacksquare$}
\subsection{Bernstein, Jacob vs. Capablanca, Jose Raul -- 0-1 -- C49}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! C49 -- Four Knights: Symmetrical, Metger, Capablanca Variation}
\subsubsection{C49 -- Four Knights: Symmetrical, Metger, Capablanca Variation}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. e4 e5 2. Nf3 Nc6 3. Nc3 Nf6 4. Bb5 Bb4 5. O-O O-O 6. d3 d6 7. Bg5 Bxc3 8. bxc3 Qe7 9. Re1 Nd8 10. d4 Bg4}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={r2n1rk1/ppp1qppp/3p1n2/1B2p1B1/3PP1b1/2P2N2/P1P2PPP/R2QR1K1 w - - 1 11},
             pgfstyle=border,
             color=YellowGreen,
             markfields={c8,g4},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={c8-g4}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{New York, New York Rice prel}}\\ 
\multicolumn{2}{l}{1916 Round 7}\\[3mm]
\textbf{$\square$ \hspace{2mm} Bernstein, Jacob} & \textbf{0}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. e4 e5 2. Nf3 Nc6 3. Nc3 Nf6 4. Bb5 Bb4 5. O-O O-O 6. d3 d6 7. Bg5 Bxc3 8. bxc3 Qe7 9. Re1 Nd8 10. d4 Bg4}\mainline{11. Bf1 Ne6 12. Bc1 Bxf3 13. gxf3 Nh5 14. Bh3 Nhf4 15. Bg4 h5 16. Bxe6 fxe6 17. Kh1 Nh3 18. Be3 Qh4 19. Qe2 Rf7 20. Rg1 Nxg1 21. Rxg1 Qf6 22. Rg3 exd4 23. Bxd4 e5 24. Be3 Qe6 25. Rg5 Raf8 26. Qf1 Rxf3 27. Qg1 R8f7 28. Rxh5 Rxe3 29. fxe3 Qc4 30. Rg5 Rf1 31. Rxg7+ Kf8 32. Rg8+ Ke7 33. Rg7+ Ke8 34. Rg8+ Kd7 35. Rg7+ Kc6 36. Rg4 Rxg1+ 37. Kxg1 Qxa2 38. h4 Qxc2 39. Rg3 a5}

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={a7,a5},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={a7-a5}]
\newline
39. ...\,\xskakget{lan}
\newline
0-1
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
