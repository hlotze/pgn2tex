\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Capablanca, Jose Raul $\square$}
\index{Players ! Lewis, J. $\blacksquare$}
\subsection{Capablanca, Jose Raul vs. Lewis, J. -- 0-1 -- B24}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! B24 -- Sicilian: Closed, 3.g3}
\subsubsection{B24 -- Sicilian: Closed, 3.g3}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. e4 c5 2. Nc3 Nc6 3. g3}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={r1bqkbnr/pp1ppppp/2n5/2p5/4P3/2N3P1/PPPP1P1P/R1BQKBNR b KQkq - 0 3},
             pgfstyle=border,
             color=YellowGreen,
             markfields={g2,g3},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={g2-g3}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{New York, New York}}\\ 
\multicolumn{2}{l}{1941}\\[3mm]
\textbf{$\square$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{0}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Lewis, J.} & \textbf{1}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. e4 c5 2. Nc3 Nc6 3. g3}\mainline{3...  d6 4. Bg2 e5 5. d3 Nf6 6. Nge2 Be7 7. O-O O-O 8. f4 exf4 9. Nxf4 Ne5 10. h3 Bd7 11. Ncd5 Bc6 12. c4 h6 13. b3 Bxd5 14. exd5 Re8 15. d4 cxd4 16. Qxd4 Qc8 17. Bb2 Bd8 18. Kh2 Bb6 19. Qc3 Neg4+ 20. hxg4 Re3 21. Qxf6 gxf6 22. Nh5 Bd8 23. Rf4 Re5 24. Raf1 Rg5 25. Bxf6 Rxh5+ 26. gxh5 Bxf6 27. Rxf6 Qg4 28. Bf3 Qd4 29. Rxd6 Re8 30. Rd7 Qd2+ 31. Kh3 Qd3 32. Bg2 Re5 33. Kh4 Rxh5+ 34. Kxh5 Qg6+ 35. Kh4 Qg5+ 36. Kh3 Qh5#}

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={g5,h5},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={g5-h5},
       pgfstyle=circle,
       color=BrickRed,
       markfield={h3}]
\newline
36. ...\,\xskakget{lan}
\newline
0-1
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
