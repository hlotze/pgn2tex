\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Capablanca, Jose Raul $\square$}
\index{Players ! Rubinstein, Akiba $\blacksquare$}
\subsection{Capablanca, Jose Raul vs. Rubinstein, Akiba -- 1/2-1/2 -- D30}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! D30 -- QGD: 3.Nf3 Nf6 4.Bg5 Nbd7}
\subsubsection{D30 -- QGD: 3.Nf3 Nf6 4.Bg5 Nbd7}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. d4 d5 2. c4 e6 3. Nf3 Nf6 4. Bg5 Nbd7}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={r1bqkb1r/pppn1ppp/4pn2/3p2B1/2PP4/5N2/PP2PPPP/RN1QKB1R w KQkq - 4 5},
             pgfstyle=border,
             color=YellowGreen,
             markfields={b8,d7},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={b8-d7}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{Budapest, Budapest}}\\ 
\multicolumn{2}{l}{1929}\\[3mm]
\textbf{$\square$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1/2}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Rubinstein, Akiba} & \textbf{1/2}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. d4 d5 2. c4 e6 3. Nf3 Nf6 4. Bg5 Nbd7}\mainline{5. e3 Be7 6. Nbd2 h6 7. Bh4 Ne4 8. Bxe7 Qxe7 9. Rc1 c6 10. Nxe4 dxe4 11. Nd2 f5 12. c5 O-O 13. Nc4 e5 14. Nd6 exd4 15. Bc4+ Kh7 16. Qxd4 Ne5 17. O-O Rb8 18. Be2 Bd7 19. Rfd1 Qf6 20. Nc4 Nxc4 21. Bxc4 Be8 22. Qd6 Qxd6 23. Rxd6 Bf7 24. Bxf7 Rxf7 25. g3 Rc7 26. b3 Kg8 27. Rc4 Re8 28. Rcd4 Kf7 29. Kg2 Re5 30. b4 a5 31. a3 axb4 32. axb4 Re6 33. h3 Kf6 34. Rd8 h5 35. g4 hxg4 36. hxg4 Rf7 37. R8d7 Ree7 38. Rxe7 Rxe7}

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={f7,e7},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={f7-e7}]
\newline
38. ...\,\xskakget{lan}
\newline
1/2-1/2
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
