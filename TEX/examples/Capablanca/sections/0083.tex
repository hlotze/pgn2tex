\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Kupchik, Abraham $\square$}
\index{Players ! Capablanca, Jose Raul $\blacksquare$}
\subsection{Kupchik, Abraham vs. Capablanca, Jose Raul -- 1/2-1/2 -- C46}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! C46 -- Three Knights: Steinitz, 4.d4 exd4 5.Nxd4 Bg7 6.Be3}
\subsubsection{C46 -- Three Knights: Steinitz, 4.d4 exd4 5.Nxd4 Bg7 6.Be3}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. e4 e5 2. Nf3 Nc6 3. Nc3 g6 4. d4 exd4 5. Nxd4 Bg7 6. Be3}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={r1bqk1nr/pppp1pbp/2n3p1/8/3NP3/2N1B3/PPP2PPP/R2QKB1R b KQkq - 2 6},
             pgfstyle=border,
             color=YellowGreen,
             markfields={c1,e3},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={c1-e3}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{Havana, Havana}}\\ 
\multicolumn{2}{l}{1913}\\[3mm]
\textbf{$\square$ \hspace{2mm} Kupchik, Abraham} & \textbf{1/2}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1/2}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. e4 e5 2. Nf3 Nc6 3. Nc3 g6 4. d4 exd4 5. Nxd4 Bg7 6. Be3}\mainline{6...  Nge7 7. g3 O-O 8. Bg2 d6 9. O-O Ne5 10. Rb1 c6 11. Qc1 Ng4 12. Qd2 Nxe3 13. Qxe3 f5 14. Rbd1 fxe4 15. Nxe4 d5 16. Nc5 Qd6 17. Nce6 Bxd4 18. Nxd4 Bg4 19. Rde1 Rae8 20. h3 Bd7 21. Kh2 c5 22. Nb3 Bb5 23. Rg1 b6 24. c3 Rf7 25. Qd2 Bc4 26. Nc1 Ref8 27. f4 h5 28. b3 Ba6 29. Re5 d4 30. Rge1 h4 31. gxh4 Rxf4 32. Re6 Qb8 33. Kg1 Nf5 34. Nd3 Bxd3 35. Qxd3 Rxh4 36. Rxg6+ Kh8 37. cxd4 Nxd4 38. Re4 Rff4 39. Re7 Rf8 40. Qe3 Nf5 41. Qg5 Qd8 42. Rf7 Qd4+ 43. Kh1 Qa1+ 44. Kh2 Qe5+ 45. Kg1 Qd4+ 46. Kh1 Rxh3+ 47. Bxh3 Qd5+ 48. Kh2 Qe5+ 49. Kh1 Qe1+ 50. Kh2 Qe5+ 51. Kh1 Qd5+ 52. Kh2 }

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={h1,h2},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={h1-h2}]
\newline
52.\,\xskakget{lan} ...
\newline
1/2-1/2
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
