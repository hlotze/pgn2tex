\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Tarrasch, Siegbert $\square$}
\index{Players ! Capablanca, Jose Raul $\blacksquare$}
\subsection{Tarrasch, Siegbert vs. Capablanca, Jose Raul -- 1/2-1/2 -- C77}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! C77 -- Spanish: Four Knights (Tarrasch) Variation}
\subsubsection{C77 -- Spanish: Four Knights (Tarrasch) Variation}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. Nc3}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={r1bqkb1r/1ppp1ppp/p1n2n2/4p3/B3P3/2N2N2/PPPP1PPP/R1BQK2R b KQkq - 3 5},
             pgfstyle=border,
             color=YellowGreen,
             markfields={b1,c3},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={b1-c3}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{St Petersburg, St Petersburg prel}}\\ 
\multicolumn{2}{l}{1914}\\[3mm]
\textbf{$\square$ \hspace{2mm} Tarrasch, Siegbert} & \textbf{1/2}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1/2}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. e4 e5 2. Nf3 Nc6 3. Bb5 a6 4. Ba4 Nf6 5. Nc3}\mainline{5...  Be7 6. d3 d6 7. d4 Bd7 8. Bxc6 Bxc6 9. Qd3 exd4 10. Nxd4 Bd7 11. O-O O-O 12. Re1 Re8 13. h3 h6 14. Qg3 Kh8 15. Bd2 Bf8 16. Qd3 c6 17. Rad1 Qe7 18. Nf3 Be6 19. Bf4 Rad8 20. Qe3 d5 21. exd5 Nxd5 22. Nxd5 Bxd5 23. Qxe7 Bxe7 24. Rxe7 Rxe7 25. c4 Re4 26. Be3 Rxc4 27. Ne5 Rb8 28. Nxc4 Bxc4 29. a3 Bd5 30. Re1 Rd8 31. Bb6 Rd7 32. Re8+ Kh7 33. Kh2 Bc4 34. Rd8 Re7 35. Rd4 Bd5 36. a4 Re2 37. b4 a5 38. bxa5 Rc2 39. Rb4 c5 40. Rf4 Be6 41. Rf3 c4 42. Bd4 Ra2 43. Kg1 Rxa4 44. Bc3 Ra2 45. Rg3 g5 46. Re3 Rc2 47. Bd4 Rc1+ 48. Kh2 Kg6 49. Kg3 Rd1 50. Bc3 Bd5 51. f3 Rc1 52. Bd4 Rc2 53. Ra3 f5 54. a6 f4+ 55. Kh2 bxa6 56. Rxa6+ Kf7 57. Kg1 h5 58. Rf6+ Ke7 59. Rf5 }

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={f6,f5},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={f6-f5}]
\newline
59.\,\xskakget{lan} ...
\newline
1/2-1/2
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
