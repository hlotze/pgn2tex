\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Capablanca, Jose Raul $\square$}
\index{Players ! Vidmar, Milan Sr $\blacksquare$}
\subsection{Capablanca, Jose Raul vs. Vidmar, Milan Sr -- 1-0 -- D64}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! D02 -- Queen's Pawn: 2.Nf3 Nf6}
\subsubsection{D02 -- Queen's Pawn: 2.Nf3 Nf6}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. d4 d5 2. Nf3 Nf6}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={rnbqkb1r/ppp1pppp/5n2/3p4/3P4/5N2/PPP1PPPP/RNBQKB1R w KQkq - 2 3},
             pgfstyle=border,
             color=YellowGreen,
             markfields={g8,f6},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={g8-f6}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{London, London}}\\ 
\multicolumn{2}{l}{1922 Round 13}\\[3mm]
\textbf{$\square$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Vidmar, Milan Sr} & \textbf{0}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. d4 d5 2. Nf3 Nf6}\mainline{3. c4 e6 4. Nc3 Be7 5. Bg5 Nbd7 6. e3 O-O 7. Rc1 c6 8. Qc2 dxc4 9. Bxc4 Nd5 10. Bxe7 Qxe7 11. O-O b6 12. Nxd5 cxd5 13. Bd3 h6 14. Qc7 Qb4 15. a3 Qa4 16. h3 Nf6 17. Ne5 Bd7 18. Bc2 Qb5 19. a4 Qxb2 20. Nxd7 Rac8 21. Qb7 Nxd7 22. Bh7+ Kxh7 23. Rxc8 Rxc8 24. Qxc8 Nf6 25. Rc1 Qb4 26. Qc2+ Kg8 27. Qc6 Qa3 28. Qa8+ Kh7 29. Rc7 Qxa4 30. Rxf7 Qd1+ 31. Kh2 Qh5 32. Qxa7 Qg6 33. Rf8 Qf5 34. Rf7 Qg6 35. Rb7 Ne4 36. Qa2 e5 37. Qxd5 exd4 38. Rb8 Nf6 39. Qxd4 Qf5 40. Rxb6 Qxf2 41. Qd3+ Kg8 42. Rb8+ }

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={b6,b8},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={b6-b8},
       pgfstyle=circle,
       color=BrickRed,
       markfield={g8}]
\newline
42.\,\xskakget{lan} ...
\newline
1-0
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
