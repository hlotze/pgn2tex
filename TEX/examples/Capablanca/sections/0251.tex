\documentclass[../main.tex]{subfiles}

\begin{document}

\index{Players ! Capablanca, Jose Raul $\square$}
\index{Players ! Rubinstein, Akiba $\blacksquare$}
\subsection{Capablanca, Jose Raul vs. Rubinstein, Akiba -- 1/2-1/2 -- D27}
\begin{multicols*}{2}

% Game's Opening ECO data
\index{Openings ! D31 -- QGD: 3.Nc3}
\subsubsection{D31 -- QGD: 3.Nc3}
\begin{flushleft}
\newchessgame[id=eco]
\longmoves
\mainline{1. d4 d5 2. c4 e6 3. Nc3}
\begin{center}
\begin{tabular}{C{60mm}}
\chessboard[setfen={rnbqkbnr/ppp2ppp/4p3/3p4/2PP4/2N5/PP2PPPP/R1BQKBNR b KQkq - 1 3},
             pgfstyle=border,
             color=YellowGreen,
             markfields={b1,c3},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={b1-c3}]
\newline
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\printmovercolor{\xskakgetgame{lastplayer}}
\end{tabular}
\end{center}
% PGN tags
\begin{tabular}{L{60mm} R{10mm}}
\multicolumn{2}{l}{\textbf{Moscow, Moscow}}\\ 
\multicolumn{2}{l}{1925}\\[3mm]
\textbf{$\square$ \hspace{2mm} Capablanca, Jose Raul} & \textbf{1/2}\\ 
\textbf{$\blacksquare$ \hspace{2mm} Rubinstein, Akiba} & \textbf{1/2}\\ 
\end{tabular}

% Game's final diagram and result
\newchessgame[id=overview]
\longmoves
\hidemoves{1. d4 d5 2. c4 e6 3. Nc3}\mainline{3...  dxc4 4. e3 Nf6 5. Bxc4 c5 6. Nf3 a6 7. O-O b5 8. Be2 Bb7 9. dxc5 Bxc5 10. Qxd8+ Kxd8 11. a3 Ke7 12. b4 Bd6 13. Bb2 Nbd7 14. Rac1 Rac8 15. Nb1 Rxc1 16. Rxc1 Rc8 17. Rxc8 Bxc8 18. Nbd2 Bb7 19. Bd3 g6 20. Kf1 Ng4 21. Be4 Bxe4}

\begin{center}
\begin{tabular}{C{60mm}}
\xskakset{moveid=\xskakgetgame{lastmoveid}}
\chessboard[setfen=\xskakget{nextfen},
       pgfstyle=border,
       color=YellowGreen,
       markfields={b7,e4},
             pgfstyle=straightmove,
             color=YellowGreen,
             markmoves={b7-e4}]
\newline
21. ...\,\xskakget{lan}
\newline
1/2-1/2
\end{tabular}
\end{center}
\end{flushleft}
\end{multicols*}
\newpage
\end{document}
